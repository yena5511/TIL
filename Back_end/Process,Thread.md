## Process

프로세스는 운영체제로부터 자원을 할당받는 작업의 단위로 일반적으로 컴퓨터에서 실행중인 프로그램을 의미한다.
독립적으로 Memory를 할당받으며, Data를 가진다.
일반적인 프로그램은 프로세스 단위로 메모리에 적재가 되서 적재된 메모리를 사용자의 요청이 생킬때마다 CPU가 가져가소 작업을 수행한다.

#### Single Process System

초기의 컴퓨터에는 CPU에서 1개의 프로그램만 실행하며, 2개 이상의 프로그램을 실행하지 못했다.
즉, 다른 프로그램을 실행하기 위해서는 기존에 사용 중이던 프로그램을 종료해야한다.

ingle Process System에서는 CPU에서 실행중인 프로세스가 IO(Input/Output) 작업을 하게 되면, CPU는 그 프로세스의 IO작업이 종료되기 전까지 오로지 대기한다. 
그리고 그 대기시간동안 CPU는 Resource(자원)를 낭비하게 되는 것이다.

#### Multi Programming

우리는 Single Process System에서 낭비하는 CPU 자원을 막기 위해, IO 작업이 생길 경우 다른 프로세스를 CPU에 실행시켜 CPU의 대기시간을 줄이기로 한다. 
바로 멀티 프로그래밍(Multi Programming)으로


```
멀티 프로그래밍은 CPU에서 실행중인 프로세스가 IO 작업이 생기면 그 동안 다른 프로세스를 CPU에서 실행시키는 방법을 의미한다.
```
이를 통해 CPU의 대기 시간이 줄어들게 되고, CPU 자원의 낭비를 줄일 수 있게 되는 것이다.

하지만 멀티 프로그래밍에는 여전히 구조적인 단점
- 1개의 프로세스가 IO 작업 없이 CPU에서 계속 실행되고 있으면, 다른 프로세스는 실행되지 못하고 대기해야 하기 때문이다.
이 경우 위의 Single Process System과 크게 다르지 않음을 알 수 있다.
- 멀티 프로그래밍은 자원 낭비 문제를 개선하기도 했지만, 우리가 원하는 '동시에' 실행 시키는 방법과는 거리가 멀었다.

#### Multi Tasking

멀티 태스킹(Multi Tasking)은 CPU의 사용 시간을 굉장히 짧은 시간 단위(Time Slot)로 분할하는 방법이다.

task는 어떤 정해진 일을 수행하기 위한 명령어의 집합으로 프로세스의 개념보다 조금 확장된 개념으로 볼 수 있다.
이러한 task가 하나의 CPU에서 운영체제의 스케줄링에 따라 조금씩 번갈아 가면서 수행되는 것이 멀티 태스킹이다.

- 예
500ms씩 점유하는 2개의 프로세스가 있고, 1개의 Time Slot을 10ms 라고 가정한다.

각 프로세스는 CPU에서 실행될 때 10ms의 단위로 반복해서 실행된다.
이는 멀티 프로그래밍에 비해 프로세스의 실행시간이 체감상 느려졌지만, 2개의 Process가 동시에 실행되는 것처럼 느낄 수 있다.

각 프로세스는 최소한의 실행 시간을 보장하게되고, 1개의 프로세스만 CPU를 독점하는 상황을 방지하게 된다.

한 CPU를 여러 프로세스가 교대로 수행해야하기 떄문에, 이 시기의 프로그램들은 응답시간을 최소화시키는 것을 목적으로 하고 개발되었다.

#### Multi Processing

멀티 프로세싱은 단어 그대로 하나 이상의 프로세서가 하나 이상의 작업을 처리하는 것을 가리킨다.
보통하나의 프로세서가 하나의 작업을 맡지만, 멀티 프로세싱은 다수의 프로세서가 다수의 작업을 처리하는 것이다.
물론 여러 개의 CPU가 하나의 컴퓨터에 있을 수도 있고, 여러 대의 컴퓨터가 있을 수도 있다.
따라서 멀티프로세싱의 개념은 컴퓨터로 나누기보다 여러 개의 CPU가 작업늘 병렬처리하는 것으로 정의하는 것이 정확하다.
멀티 프로세싱은 독립된 구조로 높은 안정성을 갖고 있으며, 한 프로세스에 문제가 생겨도 다른 Process에 영항을 주지 않는다.
작업 속도가 느려질 수는 있으나 멈추는 현상은 발생하지 않는다.


## Thread

스레드: 프로세스가 할당받은 자원을 이용하는 실행의 단위이다.
한 개의 프로세스 당 최소 한 1개 이상의 스레드를 가질 수 있다.

#### Dual Core와 Multi Thread의 등장

멀티 코어 시스템 개념이 등장하면서 여러 코어에서 작업수행이 가능해졌기 때문에 1개의 코어로 작업을 수행할 때 가지는 단점들을 케어할 수 있게 되었다.

- 다중 작업의 가능

기존에는 1개의 프로세스에서 1개의 스레드만 사용하여 여러 작업을 수행하지 못했으나,
이제는 1개의 프로세스에세 멀티 스레드를 사용하여 효율을 증가시켰다.

멀티 스레드: 하나의 프로세스 내에서 둘 이상의 스레드가 동시에 작업을 수행하는 것을 의미한다.

이런한 멀티 스레디 환경이 개발되면서 CPU에서 실행되는 단의가 프로세스에서 스레드로 변경되게 된다.

- 가벼워진 컨택스트 스위칭

프로세스 간에는 데이터 공유가 까다러웠지만, 스레드는 메모리 영역을 공유하기 때문에 동일한 메모리 영역에 스레드만 스위칭하면서 cost를 낮출 수 있다.

프로세스는 메모리를 공유하지 않지만, 한 프로세스 내에 있는 멀티 스레드는 자신이 속한 프로세스의 메모리를 공유한다.
스레드는 메모리에서 Core, Data, Heap영역만 공유하며 Stack 영역은 스레드마다 고유의 영역을 가진다.

![](https://velog.velcdn.com/images/ygreenb/post/362f52d0-78af-4d60-aa07-fd98d9309fae/image.png)

즉, 프로세스 단위로 작업을 수행하는 것보다 스레드 단위로 코어에서 작업을 수행하면 자원을 더 아낄수 있게 된다.

- Multi Tasking 개념의 확장

Dual Core와 Multi Thread의 등장 덕분에 멀티 태스킹에 대한 개념이 확장되었고, 멀티 프로세스와 멀티 스레드가 짧은 단위의 시간으로 분할된 Time Slot을 나눠서 사용하게 되었다.

#### Multi Threading

멀티스레딩은 1개의 프로세스에서 2개 이상의 스레드가 코어에게 할당되어 동작한다.

멀티 스레딩은 동시에 여러 작업을 수행하는 것을 목적으로 가진다.

2개 이상의 스레드가 1개의 코더에 할당되는 경우는 멀티 태스킹과 동작은 동일하다.
하지만 코어에서 병렬적으로 스레드가 실행되기 때문에 기존의 멀티 태스킹에 대한 단점(다중 작업 수행x, 컨택스트 스위칭, 발영 등)을 극복할 수 있게 되는 것이다.

#### Multi Process VS Multi Thread

- Multi Process

각 프로세스는 독립적인 메모리를 가지고 별도로 실행된다.

때문에 멀티 프로세스로 구현한 프로그램은 프로그램 자체가 무거워지는 단점이 생기지만, 확실한 안정성을 보장한다.

프로그램을 CPU에서 작업을 수행할 때, 코어에게 분산되서 수행하게 된다.
이 때, 부모 프로세스가 자식 프로세스를 여러 개 만들고, 각 프로세스마다 독립적으로 메모리를 포함한 독립적인 Resource 영역을 할당받고 실행하도록 만든다.

![](https://velog.velcdn.com/images/ygreenb/post/10683410-7c66-467b-924c-a1962f752d00/image.png)

코어에 대한 분배는 OS가 CPU 코어를 감시하면서 여유가 되는 코어에게 할당해주므로 각기다른 CPU 코어에 분배되기도, 1개의 코어에 분배되어 작업을 수행하기도 한다.

- Multi Thread

각 스레드는 자신이 속한 프로세스의 메모리를 공유한다.

멀티 스레드로 구현된 프로그램은 낮은 자원을 요구하는 프로그램이기 때문에 안정성보다는 속도와 경량화를 중시한다.

프로세스 1개가 Resource 영역을 갖고 있으며, 다른 채팅방을 열더라도 별도의 Resource를 할당하지 않는다.

![](https://velog.velcdn.com/images/ygreenb/post/24080b89-be7e-4565-a692-d543661d9a1d/image.pnghttps://velog.velcdn.com/images/ygreenb/post/24080b89-be7e-4565-a692-d543661d9a1d/image.png)

물론, 각 프로그램마다 특성이 있기 때문에 특성에 맞춰 Multi Processing / Multi Threading을 효율적으로 사용하는 것이 중요하다.

