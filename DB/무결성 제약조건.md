## 무결성 제약조건

무결성이란 데이터의 정확성, 일관성을 나타낸다.
데이터에 결함이 없는 상태, 즉 데이터를 정확하고 일관되게 유지하는 것을 의미한다.

## KEY

- 특정 튜플을 식별 할 때 사용하는 속성 혹은 속성의 집합
- 키가 되는 속성(혹은 속성의 집합)은 값이 반드시 달라서 튜플들을 구별할 수 있어야 한다.
- 키는 릴레이션간의 관계를 맺는 데도 사용된다.

한 릴레이션에서 중복되는 튜플들은 존재할 수 없다.
그러므로 각각의 튜플에 속성들 중 어느 하나 이상의 값이 달라져야 한다.
그리고 각각의 튜플을 식별하는 역할을 키가 담당한다.
일반적으로 키는 단일 속성으로 지정하지만 그렇지 못하는 경우 두개 이상의 속성을 묶어 키로 사용한다.

#### 슈퍼키

- 퓨플에서 유일하게 식별 할 수 있는 하나의 속성 혹은 속성의 집합
- 퓨틀을 식별할 수 있으면 모두 슈포키가 된다.
- (주민번호), (주민번호, 이름), (고객번호, 이름, 주민번호, 주소, 핸드폰) 등 여러 개가 슈퍼키가 될 수 있다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99E3E0335A0AE0FC13)

#### 후보키

- 튜플을 유일하게 식별할 수 있는 속성의 최소 집합
- 단일 속성으로는 튜플을 유일하게 식별하는 것이 불가능하므로 2개의 속성을 합한 후보키가 되며 이렇게 2개 이상의 속성으로 이루어진 키를 복합키라고 한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99D71F335A0AE2C538)
 
#### 기본키

- 여러 후보키 중 하나를 선정하여 대표로 삼는 키
- 후보키가 하나뿐이라면 그가 후보키가 된다.
- 후보키가 여러개라면 릴레이션의 특성을 반영하여 하나를 선택한다.

기본키 선정 시 고려사항

- 릴레이션 내 튜플을 식별 할 수 있는 고유한 값을 가져야한다.
- NULL값은 허용하지 않는다.
- 키 값의 변동이 일어나지 않아야 한다.
- 최대한 적은 수의 속성을 가진 것이어야 한다.
- 향후 키를 사용하는 데 있어서 문제 발생 소지가 없어야 한다.

#### 대체키

- 기본키로 선정되지 않은 후보키

#### 외래키

- 다른 릴레이션의 키본키를 참조하는 속성


![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F992CF1335A0AE6B918)

- 한 릴레이션에서 자기자신의 기본키를 외래키로 가질 수 있다,
- 외래키는 NULL값이 되어도 상관이 없다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F994B90335A0AE7A40E)

## 무결성 제약조건 (Integrity Constraint)

무결성 제약조건이란 데이터베이스의 정확성, 일관성을 보장하기 위해 저장, 삭제, 수정 등을 제약하기 위한 조건을 뜻한다.

1. 개체 무결성 (= 기본키 제약)

각 릴레이션의 기본키를 구성하는 속성은 널(NULL)값을 가질 수 없다.
속성 전체나 일부가 널 값이 되면 튜플의 유일성을 판단할 수 없기 때문에 본래의 목적을 상실하게 된다.

- 삽입: 기본 키 값이 같으면 삽입이 금지됨
- 수정: 기본 키 값이 같거나 NULL로도 수정이 금지됨
- 삭제: 특별한 확인이 필요하지 않으면 즉시 수행함

2. 참조 무결성 (= 외래키 제약)

외래키 값은 NULL이거나 참조하는 릴레이션의 기본키 값과 동일해야 한다.
즉, 각 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다.
참조하는 테이블을 같이 삭제할 수 있어서 금지하거나 추가작업이 필요없다.
부모릴레이션에서 삭제를 하는 경우에는 해당 키를 다른 릴레이션에서 사용하고 있을 수 있으므로 삭제에 제한이 걸리지만 자식릴레이션은 바로 삭제를 할 수 있다.

3. 도메인 무결성

속성들의 값은 정의된 도메인에 속한 값이어야 한다.
각각의 속성은 숫자, 문자 등의 도메인을 가지면 해당 도메인에 맞는 데이터를 삽입해야 한다. 
원자값(자료형)

```
예) 주문 릴레이션에서 주문 일자는 날짜 데이터만 사용하야 한다.

만약 영문자가 등의 다른 자료형을 사용한다면 자료의 저장 및 검색에 큰 어려움이 따를 것이다.
```

4. 키 무결성

릴레이션에는 최소한 하나의 키가 존재해야 한다.

5. NULL무결성

특정 속송은 NULL값을 가질 수 없다.
기본적으로 속성값으로 null 값을 가질 수 있는데 만약 "유저 아이디"처럼 중요한 정보에는 스키마를 정의할 때 해당 속성을 null 데이터가 올 수 없음을 미리 정의할 수 있다.

6. UNIQUE 제약조건

속성의 모든 값들에 서로 같은 값이 없어야 한다.
릴레이션내의 각각의 투플을 유일하게 식별할 수 있는 속성들의 집합으로 볼 수 있다.

기본키 제약과는 달리 NULL값을 허용한다.
