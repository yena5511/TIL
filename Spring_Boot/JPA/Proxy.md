## JPA Proxy

JPA에서 프록시는 실제 엔티티 객체 대신 데이테베이스 조회를 지연시킬 수 있는 가짜 객체를 의미한다.
연관된 객체들을 데이터베이스에서조회하기 위해서 사용한다.
프록시를 사용하면 연관된 객체들을 처음부터 데이터베이스에서 조회하는 것이 아니라 실제 사용하는 시점에 데이터베이스에서 조회할 수 있다.

#### 즉시 로딩

```java
    @ManyToOne(fetch = FetchType.EAGER)

```

SQL에서 JPA가 내부 조인(INNER JOIN)이 아닌 외부 조인(LEFT OUTER JOIN)을 사용하는 것을 확인할 수 있는데 이는 NULL 가능성 때문이다. 
내부 조인이 외부 조인보다 성능이 좋기에 최적화를 위해 내부 조인을 사용하는 것이 유리한데 이때는 외래키에 NOT NULL 제약 조건 설정이 필요하다.

#### 지연 로딩

```java
    @ManyToOne(fetch = FetchType.LAZY)
```
지연 로딩을 사용하게 되는 경우 실제 엔티티 객체 대신 앞에서 설명한 프록시 객체가 들어가게 된다.

#### 특징

- 실제 클래스를 상속 받아서 만들어진다.
- 실제 클래스와 겉모양이 같다.
- 사용하는 입장에서는 진짜 객체인지 프록시 객체인지 구분하지 않고 사용한다.
- 프록시 객체는 실제 객체의 참조를 보관한다.
- 프록시 객체를 호출하면 프록시 객체는 실제 객체의 메소드를 호출한다.
- 프록시 객체는 처음 사용할 때 한 번만 초기화 된다

